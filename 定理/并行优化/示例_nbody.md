# nBody

### 一

The CUDA handbook An introduction 第十四章

初始，共享内存，常量内存，shuffle广播，包括CPU优化sse

### 二

### https://yangwc.com/2019/06/20/NbodySimulation/

既然共享内存仅限于同一个线程块，我们就采用一个分块的策略，不同天体计算各自的加速度之间是有数据重用的，先将天体数据预先加载到共享内存，同一个线程块的线程访问这个共享内存做相应的数值计算。但是又引入一个问题，共享内存是有限的，所以对于一个线程块的共享内存，我们不是一次性地将所有天体数据从全局内存加载到共享内存，而是分批次地加载、计算。如下图3所示，设一个线程块有pp个线程，那么NN个天体的引力计算被分到N/pN/p个线程块，每个线程块分配p个天体数据大小的共享内存，分N/PN/P批次串行计算。每次计算前，在同一个线程块内，各个线程相应地从全局内存加载各自对应的天体数据（通过线程id和线程块id、size计算索引）到共享内存，加载完毕之后各自迭代pp次计算当前批次的天体引力，如下进行下去。

### 三

cuda官方库，不过结合了opengl很复杂

### 四

https://github.com/AlexZFX/cuda-nbody

很详细的课程设计